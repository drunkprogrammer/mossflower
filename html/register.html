<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>会员注册-mossflower</title>
    <meta name="description" content="送最美的花给最美的她">
    <meta name="keywords" content="最懂你的鲜花网站">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit|ie-comp">
    
    <script src="../src/js/hm.js"></script>
    
    <link type="text/css" rel="stylesheet" href="../src/css/common.css">
    <link type="text/css" rel="stylesheet" href="../src/css/public.css">
    <link type="text/css" rel="stylesheet" href="../src/css/register.css">
    <link rel="stylesheet" href="../src/css/layer.css" id="layuicss-skinlayercss"></head>
<body class="home">
    <!-- 顶部导航 -->
    
    <div class="site-nav">
        <div class="container">

            <ul class="site-nav-l">
                
                
                
                <li class="menu dropdown">
                    <a href="javascript:void(0)" data-hover="dropdown" data-delay="0"><span class="ico ico-weixin"></span>关注微信</a>
                    <div class="dropdown-menu dropdown-weixin">
                        <p>扫码关注<br>回复"礼物" 更多惊喜！</p>
                    </div>
                </li>
                <li class="menu dropdown">
                
                    <div class="dropdown-menu dropdown-weixin">
                        <p>新人专享100元APP礼包</p>
                    </div>
                </li>
            </ul>
            <ul class="site-nav-r">
                <!--登陆状态信息显示start-->
                <li class="menu login" id="LoginInfo"><a href="/html/login.htm?backUrl=/html/login.htm" rel="nofollow">你好，请登录</a><a href="/html/register.html" rel="nofollow">注册</a></li>
                <!--登陆状态信息显示end-->
                <li class="site-nav-pipe">|</li>
                <li class="menu">
                    <a href="https://www.hua.com/help/ordercx/" rel="nofollow" target="_blank">订单查询</a>
                </li>
    
    <!--我的花礼信息显示start-->
                <li class="menu dropdown">
                </li><!--我的花礼信息显示end-->
                <li class="menu dropdown">
                    <div class="dropdown-menu dropdown-service">
                        <a href="#" target="_blank">在线付款</a>
                        <a href="#" target="_blank">帮助中心</a>
                        <a href="#" target="_blank">售后服务</a>
                        <a href="#" target="_blank">配送范围</a>
                        <a href="#" target="_blank">留言反馈</a>
                    </div>
                </li>
                <li class="site-nav-pipe">|</li>
                <!--购物车信息显示start-->
                <li class="menu dropdown">
                    <a href="https://www.hua.com/shopping/showcart/" data-hover="dropdown" data-delay="0" rel="nofollow" target="_blank" aria-expanded="false"><span class="ico ico-cart"></span>购物车<span class="text-primary" id="gwcCount">(0)</span><span class="glyphicon glyphicon-triangle-bottom"></span></a>
                    <div class="dropdown-menu dropdown-cart" id="CartInfo"><div class="empty">您的购物车中没有商品，<a href="https://www.hua.com/">先去选购吧</a>！</div></div>
                </li><!--购物车信息显示end-->
               
                
            </ul>
        </div>
    </div>
    <!-- 顶部导航 End -->
    <!-- 头部 -->
       <header>
        <div class="logo">
            <h1><a href="#" class="logo-bd">中国鲜花礼品网(陌上花开网)</a></h1>
            <i></i>
            
<div class="delivery-city">
    <div class="dropdown csqh">
        欢迎注册
    </div>
</div>

        </div>
        <div class="search">
            <form name="i_search" method="post" action="/search/">
                <div class="input-group">
                    <input name="keyword" class="form-control" placeholder="商品关键词" type="text">
                    <span class="input-group-btn">
                        <button class="btn btn-primary" type="button" onclick="this.form.submit()">搜索</button>
                    </span>
                </div>
            </form>
            
        </div>
    </header>
    <!-- 头部 End -->
    


<div class="login-wrapper">
    <input id="errorMsg" type="hidden">
    <div class="container">
        <div class="login-box">
            <ul class="login-tabs">
                <li><a href="login.htm">登录</a></li>
                <li class="active"><a href="javascript:void(0)">注册</a></li>
            </ul>
            <!-- 登录/注册tab End -->
            <!--
            	<a href="javascript:void(0);" class="logMethod">使用手机号码注册</a><div style="clear:both;"></div>
            -->
         <div class="tab-content">
                   <div id="phoneRegisterPane" class="tab-pane login-panel fade in active">
                        <div class="login-notice" id="phoneErr" style="display:none;"></div>
                        <div class="form-group">
                            <input name="phone" id="phone" class="form-control" placeholder="请填写您手机号码" value="" type="text">
                        </div>
                         <div class="form-group">
                            <input name="PassWord" id="PassWord" class="form-control" placeholder="请输入密码" value="" type="password">
                        </div>
                        <div class="form-group">
                            <input id="RexPassWord" name="RexPassWord" class="form-control" placeholder="再次输入密码" type="password">
                              
                        </div>
                        <div class="form-group">
                         <input id="useraddress" name="useraddress" maxlength="30" class="form-control" placeholder="寄货地址" type="text">
                        </div>
                       <div class="form-group verify">
                            <input name="action" value="reg" type="hidden">
                            <input id="username" name="username" maxlength="4" class="form-control" placeholder="姓名" type="text">
                        </div>
                    </div>
                    <button class="btn btn-primary btn-lg btn-block" type="button" id="btnPhoneRegister" name="btnPhoneRegister">立即注册</button>             
                       
          
            <form action="../jsp/Uregister.jsp" method="post" name="regForm2" id="regForm2" style="display:none;"> 
                 <div id="phoneRegisterPane" class="tab-pane login-panel fade in active">
                        <div class="login-notice" id="phoneErr" style="display:none;"></div>
                        <div class="form-group">
                            <input name="phone" id="phone" class="form-control" placeholder="请填写您手机号码" value="" type="text">
                        </div>
                         <div class="form-group">
                            <input name="PassWord" id="PassWord" class="form-control" placeholder="请输入密码" value="" type="password">
                        </div>
                        <div class="form-group">
                            <input id="RexPassWord" name="RexPassWord" class="form-control" placeholder="再次输入密码" type="password">
                              
                        </div>
                        <div class="form-group">
                         <input id="useraddress" name="useraddress" maxlength="30" class="form-control" placeholder="寄货地址" type="text">
                        </div>
                       <div class="form-group verify">
                            <input name="action" value="reg" type="hidden">
                            <input id="username" name="username" maxlength="4" class="form-control" placeholder="姓名" type="text">
                        </div>
                    </div>
                    <button class="btn btn-primary btn-lg btn-block" type="button" id="btnPhoneRegister" name="btnPhoneRegister">立即注册</button>       
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
   
    
        <script type="text/javascript" src="../src/js/common.js"></script>
    
    <script src="../src/js/mailautocomplete.js"></script>
    <script>
        $(function () {
            var errorInfo = $.trim($("#errorMsg").val());
            if (errorInfo != "") {
                if (errorInfo.indexOf("请登录") > -1) {
                    alert(errorInfo);
                    location.href = "/jsp/login.htm?Email=";
                }
                else {
                    alert(errorInfo);
                }
            }
        });
        function RefreshImage(valImageId) {
            var objImage = document.getElementById(valImageId)
            if (objImage == undefined) {
                return;
            }
            var now = new Date();
            objImage.src = '/Passport/Register/BaseImageValidCode?x=' + now.toUTCString();
        }

        $(window.parent.document).find("#attPage").load(function () {
            var main = $(window.parent.document).find("#attPage");
            var thisheight = $(document).height();
            main.height(thisheight < 410 ? 410 : thisheight);
        });

        function Check_Reg() {         //?????????干嘛用的
            var checkOK = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-";
            var checkStr = myform.UserName.value;
            var allValid = true;
            var validGroups = true;
            for (i = 0; i < checkStr.length; i++) {
                ch = checkStr.charAt(i);
                for (j = 0; j < checkOK.length; j++)
                    if (ch == checkOK.charAt(j))
                        break;
                if (j == checkOK.length) {
                    allValid = false;
                    break;
                }
            }
            return allValid;
        }

        //检查EMAIL
        function Check_Email() {
            HideTips();
            if (document.getElementById("Email").value.length < 1) {
                ShowTips("请输入你的Email地址!");
                return false;
            } else if ((/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/gi).test($("#Email").val()) == false) {
                ShowTips("请输入有效的Email地址!");
                return false;
            }
            else {
                var ret = $.ajax(
                    {
                        url: "/jsp/Uregister/IsExistEmail?Email=" + document.getElementById("Email").value,
                        async: false
                    }).responseText;
                if (ret == 0) {
                    ShowTips("对不起，该用账号已经被人占用!");
                    return false;
                }
            }
            return true;
        }

        //检查密码
        function ChangePassword() {
            HideTips();
            var pwd = document.getElementById("PassWord").value;
            if (pwd == null || pwd.length < 6) {
                ShowTips("此项为必填项，密码不能小于6位");
                return false;
            }
            return true;
        }
        //检查重新输出密码
        function Check_RePassWord() {
            HideTips();
            var PassWord = document.getElementById("PassWord");
            var RexPassWord = document.getElementById("RexPassWord");
            if ((RexPassWord.value == "") || (PassWord.value != RexPassWord.value)) {
                ShowTips("两次输入密码不一致，请重新输入！");
                return false;
            } else {
            }
            return true;
        }

        //检查验证码
        function CheckValidateCode() {
            HideTips();
            var Validate_Code = document.getElementById("Validate_Code");
            if ((Validate_Code.value == "") || (Validate_Code.value.length < 4)) {
                ShowTips("请输入正确的验证码");
                return false;
            }
            //else{
            //	    return xmlcheckeVCode00(Validate_Code.value);
            //	}
            return true;
        }

        //提交再次验证
        function Check_User_Login() {
            //	alert("Check_Email():"+Check_Email());
            if (!Check_Email()) return false;
            //	alert("ChangePassword():"+ChangePassword());
            if (!ChangePassword()) return false;
            //	alert("Check_RePassWord():"+Check_RePassWord());
            if (!Check_RePassWord()) return false;
            //	alert("CheckValidateCode():"+CheckValidateCode());
            if (!CheckValidateCode()) return false;
            $("#regForm").submit();
        }

        function ChangeImg1() {
            $("#Img1").attr("src", "/Passport/Register/BaseImageValidCode?" + Math.random());
        }
        function ShowTips(nr) {
            $("#Enr").html("<div class=\"notice-cont\"><span class=\"ico ico-notice\"></span>" + nr + "</div>");
            $("#Enr").show();
        }
        function HideTips() {
            $("#Enr").hide();
        }
    </script>
    <script type="text/javascript">

        function SetPlaceHolder(formid) {
            var oForm1 = document.getElementById(formid);
            var oForm1Inputs = oForm1.getElementsByTagName('input');
            for (var i = 0; i < oForm1Inputs.length; i++) {
                placeHolder(oForm1Inputs[i], true);
            }
        }


        function placeHolder(obj, span) {
            if (!obj.getAttribute('placeholder')) return;
            var imitateMode = span === true ? true : false;
            var supportPlaceholder = 'placeholder' in document.createElement('input');
            if (!supportPlaceholder) {
                var defaultValue = obj.getAttribute('placeholder');
                if (!imitateMode) {
                    obj.onfocus = function () {
                        (obj.value == defaultValue) && (obj.value = '');
                        obj.style.color = '';
                    }
                    obj.onblur = function () {
                        if (obj.value == defaultValue) {
                            obj.style.color = '';
                        } else if (obj.value == '') {
                            obj.value = defaultValue;
                            obj.style.color = '#A6A6A6';
                        }
                    }
                    obj.onblur();
                } else {
                    var placeHolderCont = document.createTextNode(defaultValue);
                    var oWrapper = document.createElement('span');
                    oWrapper.style.cssText = 'position:absolute; color:#A6A6A6; display:inline-block; overflow:hidden;';
                    oWrapper.className = 'wrap-placeholder';
                    oWrapper.style.fontFamily = getStyle(obj, 'fontFamily');
                    oWrapper.style.fontSize = getStyle(obj, 'fontSize');
                    oWrapper.style.marginLeft = parseInt(getStyle(obj, 'marginLeft')) ? parseInt(getStyle(obj, 'marginLeft')) + 3 + 'px' : 3 + 'px';
                    oWrapper.style.marginTop = parseInt(getStyle(obj, 'marginTop')) ? getStyle(obj, 'marginTop') : 1 + 'px';
                    oWrapper.style.paddingLeft = getStyle(obj, 'paddingLeft');
                    oWrapper.style.width = obj.offsetWidth - parseInt(getStyle(obj, 'marginLeft')) + 'px';
                    oWrapper.style.height = obj.offsetHeight + 'px';
                    oWrapper.style.lineHeight = obj.nodeName.toLowerCase() == 'textarea' ? '' : obj.offsetHeight + 'px';
                    oWrapper.appendChild(placeHolderCont);
                    obj.parentNode.insertBefore(oWrapper, obj);
                    oWrapper.onclick = function () {
                        obj.focus();
                    }

                    if (typeof (obj.oninput) == 'object') {
                        obj.addEventListener("input", changeHandler, false);
                    } else {
                        obj.onpropertychange = changeHandler;
                    }
                    function changeHandler() {
                        oWrapper.style.display = obj.value != '' ? 'none' : 'inline-block';
                    }

                    function getStyle(obj, styleName) {
                        var oStyle = null;
                        if (obj.currentStyle)
                            oStyle = obj.currentStyle[styleName];
                        else if (window.getComputedStyle)
                            oStyle = window.getComputedStyle(obj, null)[styleName];
                        return oStyle;
                    }
                }
            }
        }
        //回车键
        document.onkeydown = function (event) {
            var e = event || window.event || arguments.callee.caller.arguments[0];
            if (e && e.keyCode == 13) {
                var isFocus = $("#Email").is(":focus");
                if (isFocus) {
                    $("#PassWord").focus();
                    return false;
                }
                else {
                    Check_User_Login();
                }
            }
        };
        //********************手机号码注册********************
        var interval = null;
        var counter = 0;
        $(function () {
            SetPlaceHolder("regForm");
            $("#regForm2").hide();
            $(".logMethod").click(function () {
                if ($(this).text() == "使用邮箱注册") {
                    $(this).text("使用手机号码注册");
                    $("#regForm").show();
                    $("#regForm2").hide();
                } else {
                    $(this).text("使用邮箱注册");
                    $("#regForm").hide();
                    $("#regForm2").show();
                    SetPlaceHolder("regForm2");
                }
            });
            $("#getcode").click(function () {
                HidePhoneTips();
                if (!check_Phone()) return false;
                if (!check_PassWord()) return false;
                if (!check_ValidateCode()) return false;
                var phone = $("#phone").val();
                var imgCode = $("#phoneLoginValidCode").val();
                var data = { phone: phone, imgCode: imgCode };
                $.ajax({
                    type: "Post",
                    url: "../jsp/Uregister.jsp",
                    data: data,
                    dataType: "json",
                    async: false,
                    success: function (data) {
                        if (data.OK) {
                            ShowPhoneTips("验证码已发送,请查收!");
                            $("#phone").attr("disabled", "disabled");
                            $("#phonePassWord").attr("disabled", "disabled");
                            $("#phoneLoginValidCode").attr("disabled", "disabled");
                            $("#getcode").hide();
                            $("#regetcode").html("90");
                            $("#prompt_info").show();
                            $("#phoneCode").removeAttr("disabled");
                            interval = window.setInterval(intervalFunc, 1000);

                        } else if (data.Msg == "-1") {
                            ShowPhoneTips("您输入的验证码不正确!");
                            return false;
                        }
                        else {
                            ShowPhoneTips("获取验证码失败!");
                            return false;
                        }
                    }
                });
            });
        });
        $("#btnPhoneRegister").click(function () {
            $("#btnPhoneRegister").attr("disabled", "disabled");
            HidePhoneTips();
            if (!check_PassWord()) return false;
            var phoneCode = $("#phoneCode").val().trim();
            if (phoneCode == "" || phoneCode.length < 6) {
                ShowPhoneTips("请输入您的短信验证码!");
                return false;
            }
            else {
                var phone = $("#phone").val();
                var password = $("#PassWord").val();

                $.ajax({
                    url: '../jsp/Uregister.jsp',
                    type: 'post',
                    data: {
                        phone: phone,
                        password: password,
                        phoneCode: phoneCode
                    },
                    datatype: 'json',
                    async: false,//使用同步的方式,true為非同步方式
                    success: function (data) {
                        if (!data.OK) {
                            ShowPhoneTips(data.Msg);
                            return false;
                        }
                        else if (data.OK) {
                            location.href = "/";
                        }
                    }
               
                });
            }
            $("#btnPhoneRegister").removeAttr("disabled");
        });
            //手机号注册检测手机号
            function check_Phone()
            {
                HidePhoneTips();
                var phone = $("#phone").val().trim();
                if (phone.length <= 0) {
                    ShowPhoneTips("手机号不能为空，请您重新输入！");
                    return false;
                } else if (!(/^\s*1\d{10}\s*$/gi).test(phone)) {
                    ShowPhoneTips("很抱歉!请输入有效的手机号！");
                    return false;
                }
                else {
                    var imgCode = $("#phoneLoginValidCode").val();
                    if (imgCode.length <= 0)
                    {
                        ShowPhoneTips("很抱歉!请输入图形验证码！");
                    }
                    var ret = $.ajax(
                        {
                            url: "/jsp/Uregister/IsExistPhone?phone=" + phone + "&imgCode="+imgCode,
                            async: false
                        }).responseText;
                    if (ret == 0) {
                        ShowPhoneTips("该手机号已是会员，请使用<a href='/Passport/Login/?lw=yzm&phone=" + phone + "' style='text-decoration:underline'>手机验证码登陆>></a>");
                        return false;
                    }
                    else if (ret == -1)
                    {
                        ShowPhoneTips("图形验证码不正确!");
                        return false;
                    }
                }
                return true;
            }

            //手机号注册检测密码
            function check_PassWord() {
                HidePhoneTips();
                var pwd = $("#PassWord").val().trim();
                if (pwd == "" || pwd.length < 6) {
                    ShowPhoneTips("请输入您的登录密码且密码不能小于6位!");
                    return false;
                }
                return true;
            }

            //手机号注册检测验证码
            function check_ValidateCode() {
                HidePhoneTips();
                var code = $("#LoginValidCode").val().trim();
                if ((code == "") || (code.length < 4)) {
                    ShowPhoneTips("您输入的验证码不正确!");
                    return false;
                }
                return true;
            }


            function ShowPhoneTips(nr) {
                $("#phoneErr").html("<div class=\"notice-cont\"><span class=\"ico ico-notice\"></span>" + nr + "</div>");
                $("#phoneErr").show();
            }
            function HidePhoneTips() {
                $("#phoneErr").hide();
            }

            function intervalFunc() {
                if (counter > 90) {
                    counter = 0;
                    $("#regetcode").html("");
                    $("#getcode").show();
                    $("#prompt_info").hide();
                    window.clearInterval(interval);
                } else {
                    $("#regetcode").html((90 - counter).toString());
                }
                counter = counter + 1;
            }

     </script>

        <script type="text/javascript" src="../src/js/statesandright.js"></script>
    <script src="../src/js/layer.js"></script>
    <script type="text/javascript">
        var userId = 0;
        function reqUrlParam(paras) {
            var url = location.href;
            var paraString = url.substring(url.indexOf("?") + 1, url.length).split("&");
            var paraObj = {}
            for (i = 0; j = paraString[i]; i++) {
                paraObj[j.substring(0, j.indexOf("=")).toLowerCase()] = j.substring(j.indexOf("=") + 1, j.length);
            }
            var returnValue = paraObj[paras.toLowerCase()];
            if (typeof (returnValue) == "undefined") {
                return "";
            } else {
                return returnValue;
            }
        }
        function setCurUrlClass() {
            // css : class = "color_tj"
            var pathname1 = window.location.pathname;
            $("a[href='" + pathname1 + "'").addClass("color_tj");
        }
        if ($("#pjCount").length > 0) {
            $.get("/productpj/GetPJCount", function (data) {
                $("#pjCount").text(data);
            });
        }
        $(function () {
            $.get("/Home/GetLoginUserId", null, function (data) {
                userId = data;
            }, "json");
        });

        $("#kefu").click(function () {
            $.post("/jsp/Uregister", null, function (data) {
                window.open('/jsp/Uregister?sysNum=d22b0bfa87fd42258397365c95bc5e08&partnerId=' + data + '', '在线客服', 'height=800,width=650,toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no');
            });
            
        });
        $("#kefu1").click(function () {
            $.post("/jsp/Uregister", null, function (data) {
                window.open('/jsp/Uregister?sysNum=d22b0bfa87fd42258397365c95bc5e08&partnerId=' + data + '', '在线客服', 'height=800,width=650,toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no');
            });
            
        });
    </script>

</body>
</html>